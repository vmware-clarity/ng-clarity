/*
 * Copyright (c) 2016-2025 Broadcom. All Rights Reserved.
 * The term "Broadcom" refers to Broadcom Inc. and/or its subsidiaries.
 * This software is released under MIT license.
 * The full license information can be found in LICENSE in the root directory of this project.
 */

@use 'sass:meta';
@use 'sass:map';
@use '../../styles/mixins';
@use '../badge/variables.badges' as badges-variables;
@use 'variables.label' as label-variables;
@use '../../styles/variables/variables.density' as density;
@use '../../styles/core/tokens/variables.tokens' as tokens;

@include meta.load-css('properties.label');

@mixin buildLabelStyles($colors, $badge-colors) {
  background-color: map.get($colors, bg-color);
  border: label-variables.$clr-label-borderwidth solid map.get($colors, border-color);
  color: map.get($colors, color);

  & > .badge {
    border-color: map.get($badge-colors, bg-color);
    background-color: map.get($badge-colors, bg-color);
    color: map.get($badge-colors, color);
  }

  cds-icon,
  clr-icon {
    color: map.get($colors, color);
  }

  &.clickable:not(.disabled):hover,
  &.clickable:not(.disabled):active {
    border-color: map.get($badge-colors, bg-color);
  }

  &.label-solid {
    border-color: map.get($colors, solid-border-color);
    background-color: map.get($colors, solid-bg-color);
    color: map.get($colors, solid-color);

    &.clickable:not(.disabled, :active, :hover) > .badge {
      border-color: map.get($badge-colors, outline-bg-color);
      background-color: map.get($badge-colors, outline-bg-color);
      color: map.get($badge-colors, outline-color);
    }

    cds-icon,
    clr-icon {
      color: map.get($colors, solid-color);
    }
  }
}
@mixin generateLabelStyles($color: gray, $alias: null) {
  $colors: map.get(label-variables.$label-colors, $color);
  $badge-colors: map.get(badges-variables.$badge-colors, $color);

  &.label-#{'' + $color} {
    @include buildLabelStyles($colors, $badge-colors);
  }

  @if ($alias) {
    &.label-#{$alias} {
      @include buildLabelStyles($colors, $badge-colors);
    }
  }
}

@include mixins.exports('labels.clarity') {
  //NOTE: Had to use inline-flex, reset line-height to normal, and had to use change a few values
  //instead of using our baselineRem function. This was done to achieve the desired look
  //and to align this with our vertical baseline. Not sure why but aligning inline-blocks within inline-blocks
  //is a bit tricky. I initially used display: inline-block but I wasn't able to align the labels properly.
  .label,
  a.label {
    //default

    @include mixins.generate-typography-token('CAPTION-LG-11-CPT');

    display: inline-flex;
    justify-content: center;
    align-items: center;
    gap: density.$clr-base-gap-xs;
    padding: density.$clr-base-vertical-offset-2xs calc(density.$clr-base-horizontal-offset-xs * 2);
    border: label-variables.$clr-label-borderwidth solid label-variables.$clr-label-default-border-color;
    border-radius: density.$clr-base-border-radius-xl;
    min-height: density.$clr-base-row-height-s;
    margin: 0 density.$clr-base-horizontal-offset-s density.$clr-base-vertical-offset-2xs 0;
    white-space: nowrap;
    color: label-variables.$clr-label-font-color;
    text-decoration: none;

    &.label-solid {
      border-color: label-variables.$clr-label-default-solid-border-color;
      background-color: label-variables.$clr-label-default-solid-bg-color;
      color: label-variables.$clr-label-font-solid-color;

      & > .badge {
        border-color: badges-variables.$clr-badge-outline-border-color;
        background-color: badges-variables.$clr-badge-outline-bg-color;
        color: badges-variables.$clr-badge-outline-color;
      }
    }

    // Set lower padding size if there is a badge or icon in the start / end of a label.
    &:has(> .badge:first-child),
    &:has(> cds-icon:first-child) {
      padding-left: density.$clr-base-horizontal-offset-xs;
    }

    &:has(> .badge:last-child),
    &:has(> cds-icon:last-child) {
      padding-right: density.$clr-base-horizontal-offset-xs;
    }

    .badge,
    cds-icon {
      margin: 0;
      text-decoration: none;
    }

    cds-icon:not([size]) {
      @include mixins.min-equilateral(density.$clr-base-icon-size-s);
    }

    &.clickable:not(:has(.text)) {
      text-decoration: underline;
    }

    &.clickable > .text {
      text-decoration: underline;
    }

    &:visited {
      color: label-variables.$clr-label-font-color;

      cds-icon,
      clr-icon {
        color: label-variables.$clr-label-font-color;
      }
    }

    &:focus,
    &:hover,
    &:active {
      text-decoration: none;
    }

    &.clickable:not(.disabled) {
      cursor: pointer;

      &:hover {
        text-decoration: none;
        background: label-variables.$clr-label-bg-hover-color;
        color: label-variables.$clr-label-hover-color;

        cds-icon,
        clr-icon {
          color: label-variables.$clr-label-hover-color;
        }
      }

      &:active {
        color: label-variables.$clr-label-active-color;
        background: label-variables.$clr-label-bg-active-color;
        transform: translateY(tokens.$cds-global-space-2);

        cds-icon,
        clr-icon {
          color: label-variables.$clr-label-active-color;
        }
      }
    }

    @include generateLabelStyles(gray, 1);
    @include generateLabelStyles(purple, 2);
    @include generateLabelStyles(blue, 3);
    @include generateLabelStyles(orange, 4);
    @include generateLabelStyles(light-blue, 5);
    @include generateLabelStyles(info);
    @include generateLabelStyles(success);
    @include generateLabelStyles(warning);
    @include generateLabelStyles(danger);

    & > .badge {
      margin: 0;
    }

    &.disabled,
    &:disabled {
      cursor: not-allowed;
      background: label-variables.$clr-label-bg-disabled-color;
      color: label-variables.$clr-label-disabled-color;
      border-color: label-variables.$clr-label-disabled-border-color;

      cds-icon,
      clr-icon {
        color: label-variables.$clr-label-disabled-color;
      }

      .badge {
        background: label-variables.$clr-label-disabled-color;
        border-color: label-variables.$clr-label-disabled-color;
        color: label-variables.$clr-label-bg-disabled-color;
      }
    }
  }
}
