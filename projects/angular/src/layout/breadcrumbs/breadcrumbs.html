<div role="list" class="clr-breadcrumb-menu">
  <ng-container *ngIf="items?.length">
    <clr-breadcrumb-item *ngIf="items.length > max && !isExpanded">
      <span (click)="expand()" (keydown)="expand()" class="clr-breadcrumb-expand">
        <cds-icon shape="ellipsis-horizontal"></cds-icon>
      </span>
    </clr-breadcrumb-item>
    <ng-container *ngFor="let breadcrumb of items | slice: -limit : items.length; let isLastItem=last">
      <clr-breadcrumb-item>
        <span *ngIf="isLastItem; else breadcrumbLinks" aria-current="page">{{ breadcrumb?.label }}</span>

        <ng-template #breadcrumbLinks>
          <a
            *ngIf="breadcrumb?.routerLink"
            [routerLink]="breadcrumb?.routerLink"
            [queryParams]="breadcrumb?.queryParams"
            [target]="breadcrumb?.target"
            (click)="handleItemClick(breadcrumb)"
          >
            {{ breadcrumb?.label }}
          </a>
          <a
            *ngIf="!breadcrumb?.routerLink"
            [href]="breadcrumb?.url"
            [target]="breadcrumb?.target"
            (click)="handleItemClick(breadcrumb)"
          >
            {{ breadcrumb?.label }}
          </a>
        </ng-template>
      </clr-breadcrumb-item>
    </ng-container>
  </ng-container>
</div>
