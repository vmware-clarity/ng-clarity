<div role="list" class="clr-breadcrumb-menu">
  <ng-container *ngIf="items?.length">
    <clr-breadcrumb-item *ngIf="items.length > max && !isExpanded">
      <button class="btn btn-link btn-sm clr-breadcrumb-expand" (click)="expand()" (keydown)="expand()">
        <cds-icon shape="ellipsis-horizontal"></cds-icon>
      </button>
    </clr-breadcrumb-item>
    <ng-container *ngFor="let breadcrumb of items | slice: -limit : items.length; let isLastItem=last">
      <clr-breadcrumb-item>
        <span *ngIf="isLastItem; else breadcrumbLinks" aria-current="page">{{ breadcrumb.label }}</span>

        <ng-template #breadcrumbLinks>
          <a
            *ngIf="breadcrumb.routerLink"
            [routerLink]="breadcrumb.routerLink"
            [queryParams]="breadcrumb.queryParams"
            [target]="breadcrumb.target"
            (click)="handleItemClick(breadcrumb)"
          >
            {{ breadcrumb.label }}
          </a>
          <a
            *ngIf="breadcrumb.href"
            [href]="breadcrumb.href"
            [target]="breadcrumb.target"
            (click)="handleItemClick(breadcrumb)"
          >
            {{ breadcrumb.label }}
          </a>
        </ng-template>
      </clr-breadcrumb-item>
    </ng-container>
  </ng-container>
</div>
