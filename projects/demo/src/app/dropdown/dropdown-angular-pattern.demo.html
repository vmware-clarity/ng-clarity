<!--
  ~ Copyright (c) 2016-2024 Broadcom. All Rights Reserved.
  ~ The term "Broadcom" refers to Broadcom Inc. and/or its subsidiaries.
  ~ This software is released under MIT license.
  ~ The full license information can be found in LICENSE in the root directory of this project.
  -->

<div class="clr-example squeeze demo-menu-height dropdown-demo">
  <clr-dropdown>
    <button class="btn btn-link-primary" clrDropdownTrigger id="current">
      Dropdown
      <cds-icon shape="angle" direction="down"></cds-icon>
    </button>
    <clr-dropdown-menu>
      <div class="dropdown-header" aria-hidden="true">
        <form class="clr-form clr-form-horizontal">
          <input
            type="text"
            placeholder="Fill me in, scotty!"
            name="name"
            id="name"
            class="clr-input"
            (keyup)="delay($event)"
            [(ngModel)]="model.searchTerm"
          />
          <label for="name">
            <cds-icon shape="search"></cds-icon>
          </label>
        </form>
      </div>

      <div
        *ngFor="let line of model.lines"
        aria-label="'line.ariaLabel'"
        class="dropdown-item"
        style="flex-direction: column"
      >
        <div>{{line.text}}</div>
        <div>{{line.details}}</div>
      </div>
    </clr-dropdown-menu>
  </clr-dropdown>
  <clr-dropdown [clrCloseMenuOnItemClick]="false">
    <button class="btn btn-link-primary" clrDropdownTrigger id="current-combobox">
      Dropdown with form combobox
      <cds-icon shape="angle" direction="down"></cds-icon>
    </button>
    <clr-dropdown-menu #dropDownMenu>
      <form clrForm clrLayout="vertical" clrDropdownItem>
        <select clrSelect>
          <option>1</option>
          <option>3</option>
          <option>2</option>
        </select>

        <clr-combobox-container>
          <label>Favorite States</label>
          <clr-combobox
            #combo
            [(ngModel)]="comboFormModel.states"
            name="five"
            clrMulti="true"
            required
            [disabled]="false"
          >
            <ng-container *clrOptionSelected="let selected">
              <cds-icon shape="sun" size="12" role="img" aria-label="welcome home"></cds-icon>
              {{selected?.name}}
            </ng-container>
            <clr-options (click)="comboBoxMouseClick($event)">
              <clr-option *clrOptionItems="let state of states; field:'name'" [clrValue]="state">
                <cds-icon shape="world" role="img" aria-label="World is turning"></cds-icon> {{state.name}}
                <cds-icon shape="sun" size="12" role="img" aria-label="Sun is shining"></cds-icon>
              </clr-option>
            </clr-options>
          </clr-combobox>
          <clr-control-helper>Helper text</clr-control-helper>
          <clr-control-error>There was an error</clr-control-error>
        </clr-combobox-container>
      </form>
    </clr-dropdown-menu>
  </clr-dropdown>

  <button class="btn btn-icon btn-sm btn-link" type="button" #anchor clrPopoverAnchor clrPopoverOpenCloseButton>
    <cds-icon
      [attr.status]="open ? 'info' : null"
      [attr.shape]="open ? 'filter-grid-circle' : 'filter-grid'"
      solid
    ></cds-icon>
  </button>

  <div
    class="datagrid-filter"
    [id]="popoverId"
    cdkTrapFocus
    *clrPopoverContent="open; at: smartPosition; outsideClickToClose: true; scrollToClose: true"
    role="dialog"
    [attr.aria-label]="commonStrings.keys.datagridFilterDialogAriaLabel"
  >
    <div class="datagrid-filter-close-wrapper">
      <button type="button" class="close" clrPopoverCloseButton>
        <cds-icon shape="window-close" [attr.title]="commonStrings.keys.close"></cds-icon>
      </button>
    </div>

    <form clrForm clrLayout="vertical">
      <select clrSelect>
        <option>1</option>
        <option>3</option>
        <option>2</option>
      </select>

      <clr-combobox-container>
        <label>Favorite States</label>
        <clr-combobox #combo [(ngModel)]="comboFormModel.states" name="five" required [disabled]="false">
          <ng-container *clrOptionSelected="let selected">
            <cds-icon shape="sun" size="12" role="img" aria-label="welcome home"></cds-icon>
            {{selected?.name}}
          </ng-container>
          <clr-options (click)="comboBoxMouseClick($event)">
            <clr-option *clrOptionItems="let state of states; field:'name'" [clrValue]="state">
              <cds-icon shape="world" role="img" aria-label="World is turning"></cds-icon> {{state.name}}
              <cds-icon shape="sun" size="12" role="img" aria-label="Sun is shining"></cds-icon>
            </clr-option>
          </clr-options>
        </clr-combobox>
        <clr-control-helper>Helper text</clr-control-helper>
        <clr-control-error>There was an error</clr-control-error>
      </clr-combobox-container>
    </form>
  </div>
</div>
