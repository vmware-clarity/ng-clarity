<!--
~ Copyright (c) 2016-2025 Broadcom. All Rights Reserved.
~ The term "Broadcom" refers to Broadcom Inc. and/or its subsidiaries.
~ This software is released under MIT license.
~ The full license information can be found in LICENSE in the root directory of this project.
-->

<h2>File Input Component</h2>

<form clrForm clrLayout="vertical" [formGroup]="form">
  <clr-file-input-container>
    <label>Basic</label>
    <input
      type="file"
      accept=".txt,text/plain"
      multiple
      required
      formControlName="file"
      clrFileInput
      [clrMaxFileSize]="500"
    />
    <clr-control-helper>Helper text</clr-control-helper>
    <clr-control-success>Success message</clr-control-success>
    <clr-control-error *clrIfError="'required'">Required</clr-control-error>
    <clr-control-error *clrIfError="'accept'">File type not accepted</clr-control-error>
    <clr-control-error *clrIfError="'minFileSize'">File size too small</clr-control-error>
    <clr-control-error *clrIfError="'maxFileSize'">File size too large</clr-control-error>
  </clr-file-input-container>

  <pre>
    touched: {{ form.controls.file.touched }}

    status: {{ form.controls.file.status }}

    value (length): {{ form.controls.file.value?.length }}

    errors: {{ form.controls.file.errors | json }}
  </pre>

  <clr-file-input-container>
    <label>Disabled</label>
    <input type="file" multiple clrFileInput disabled />
    <clr-control-helper>Helper text</clr-control-helper>
    <clr-control-error *clrIfError="'required'">Required</clr-control-error>
    <clr-control-error *clrIfError="'accept'">Text files only</clr-control-error>
  </clr-file-input-container>
</form>

<h2>Advanced File Input Component</h2>

<form clrForm clrLayout="vertical" [formGroup]="advancedForm">
  <clr-file-input-container>
    <label>Advanced</label>
    <input
      type="file"
      accept=".txt,text/plain"
      multiple
      required
      formControlName="files"
      clrFileInput
      [clrMinFileSize]="50"
      [clrMaxFileSize]="500"
    />
    <clr-control-helper>Helper text for file input control</clr-control-helper>
    <clr-control-success>Success message for file input control</clr-control-success>
    <clr-control-error *clrIfError="'required'">Required</clr-control-error>

    <!-- This makes this file input an "advanced" file input. -->
    <clr-file-list>
      <ng-template clr-file-messages let-file let-errors="errors">
        <clr-file-info>Info text for {{ file.name }}</clr-file-info>
        <clr-file-success>Success message for {{ file.name }}</clr-file-success>
        @if (errors.accept) {
        <clr-file-error>File type not accepted</clr-file-error>
        } @if (errors.minFileSize) {
        <clr-file-error>File size too small</clr-file-error>
        } @if (errors.maxFileSize) {
        <clr-file-error>File size too large</clr-file-error>
        }
      </ng-template>
    </clr-file-list>
  </clr-file-input-container>

  <pre>
    touched: {{ advancedForm.controls.files.touched }}

    status: {{ advancedForm.controls.files.status }}

    value (length): {{ advancedForm.controls.files.value?.length }}

    errors: {{ advancedForm.controls.files.errors | json }}
  </pre>
</form>

<h2>File Input CSS-Only</h2>

<form class="clr-form">
  <div class="clr-form-control">
    <label class="clr-control-label">Basic</label>
    <div class="clr-control-container">
      <div class="clr-file-input-wrapper">
        <label for="basic" class="clr-control-label">
          <span class="btn btn-sm clr-file-input-browse-button">
            <cds-icon shape="folder-open"></cds-icon>
            <span class="clr-file-input-browse-button-text">browse</span>
          </span>
        </label>
        <input type="file" id="basic" placeholder="Enter value here" class="clr-file-input" />
      </div>
      <span class="clr-subtext">Helper text</span>
    </div>
  </div>

  <div class="clr-form-control">
    <label class="clr-control-label">Error</label>
    <div class="clr-control-container clr-error">
      <div class="clr-file-input-wrapper">
        <label for="error" class="clr-control-label">
          <span class="btn btn-sm clr-file-input-browse-button">
            <cds-icon shape="folder-open"></cds-icon>
            <span class="clr-file-input-browse-button-text">browse</span>
          </span>
        </label>
        <input type="file" id="error" placeholder="Enter value here" class="clr-file-input" />
        <cds-icon class="clr-validate-icon" shape="exclamation-circle" status="danger"></cds-icon>
      </div>
      <span class="clr-subtext">Helper text</span>
      <span class="clr-subtext error">Error message</span>
    </div>
  </div>

  <div class="clr-form-control">
    <label class="clr-control-label">Success</label>
    <div class="clr-control-container clr-success">
      <div class="clr-file-input-wrapper">
        <label for="error" class="clr-control-label">
          <span class="btn btn-sm clr-file-input-browse-button">
            <cds-icon shape="folder-open"></cds-icon>
            <span class="clr-file-input-browse-button-text">browse</span>
          </span>
        </label>
        <input type="file" id="error" placeholder="Enter value here" class="clr-file-input" />
        <cds-icon class="clr-validate-icon" shape="exclamation-circle" status="danger"></cds-icon>
      </div>
      <span class="clr-subtext">Helper text</span>
      <span class="clr-subtext success">Success message</span>
    </div>
  </div>

  <div class="clr-form-control clr-form-control-disabled">
    <label class="clr-control-label">Disabled</label>
    <div class="clr-control-container clr-error">
      <div class="clr-file-input-wrapper">
        <button class="btn btn-sm clr-file-input-browse-button" disabled>
          <cds-icon shape="folder-open"></cds-icon>
          <span class="clr-file-input-browse-button-text">browse</span>
        </button>
        <input type="file" id="disaled" disabled placeholder="Enter value here" class="clr-file-input" />
      </div>
      <span class="clr-subtext">Helper text</span>
    </div>
  </div>
</form>

<h2>File Input CSS-Only (Deprecated)</h2>

<form class="clr-form">
  <div class="clr-form-control">
    <label class="clr-control-label">Basic</label>
    <div class="clr-control-container">
      <div class="clr-file-wrapper">
        <label for="basic" class="clr-control-label"><span class="btn btn-sm">browse</span></label>
        <input type="file" id="basic" placeholder="Enter value here" class="clr-file" />
      </div>
      <!-- IMPORTANT DIFFERENCE IN STRUCTURE! ICON IS NOT PART OF THE INPUT WRAPPER -->
      <cds-icon class="clr-validate-icon" shape="exclamation-circle" status="danger"></cds-icon>
      <span class="clr-subtext">Helper Text</span>
    </div>
  </div>

  <div class="clr-form-control">
    <label for="basic-default" class="clr-control-label">Basic default</label>
    <div class="clr-control-container">
      <div class="clr-file-wrapper">
        <input type="file" id="basic-default" placeholder="Enter value here" />
      </div>
      <!-- IMPORTANT DIFFERENCE IN STRUCTURE! ICON IS NOT PART OF THE INPUT WRAPPER -->
      <cds-icon class="clr-validate-icon" shape="exclamation-circle" status="danger"></cds-icon>
      <span class="clr-subtext">Helper Text</span>
    </div>
  </div>

  <div class="clr-form-control">
    <label class="clr-control-label">Error</label>
    <div class="clr-control-container clr-error">
      <div class="clr-file-wrapper">
        <label for="error" class="clr-control-label"><span class="btn btn-sm">browse</span></label>
        <input type="file" id="error" placeholder="Enter value here" class="clr-file" />
      </div>
      <!-- IMPORTANT DIFFERENCE IN STRUCTURE! ICON IS NOT PART OF THE INPUT WRAPPER -->
      <cds-icon class="clr-validate-icon" shape="exclamation-circle" status="danger"></cds-icon>
      <span class="clr-subtext">Helper Text</span>
    </div>
  </div>

  <div class="clr-form-control">
    <label for="error-default" class="clr-control-label">Error default</label>
    <div class="clr-control-container clr-error">
      <div class="clr-file-wrapper">
        <input type="file" id="error-default" placeholder="Enter value here" />
      </div>
      <!-- IMPORTANT DIFFERENCE IN STRUCTURE! ICON IS NOT PART OF THE INPUT WRAPPER -->
      <cds-icon class="clr-validate-icon" shape="exclamation-circle" status="danger"></cds-icon>
      <span class="clr-subtext">Helper Text</span>
    </div>
  </div>

  <div class="clr-form-control clr-form-control-disabled">
    <label class="clr-control-label">Disabled</label>
    <div class="clr-control-container clr-error">
      <div class="clr-file-wrapper">
        <label for="disabled" class="clr-control-label"><span class="btn btn-sm">browse</span></label>
        <input type="file" id="disaled" disabled placeholder="Enter value here" class="clr-file" />
      </div>
      <!-- IMPORTANT DIFFERENCE IN STRUCTURE! ICON IS NOT PART OF THE INPUT WRAPPER -->
      <cds-icon class="clr-validate-icon" shape="exclamation-circle" status="danger"></cds-icon>
      <span class="clr-subtext">Helper Text</span>
    </div>
  </div>

  <div class="clr-form-control clr-form-control-disabled">
    <label for="disabled-default" class="clr-control-label">Disabled default</label>
    <div class="clr-control-container clr-error">
      <div class="clr-file-wrapper">
        <input type="file" id="disabled-default" disabled placeholder="Enter value here" />
      </div>
      <!-- IMPORTANT DIFFERENCE IN STRUCTURE! ICON IS NOT PART OF THE INPUT WRAPPER -->
      <cds-icon class="clr-validate-icon" shape="exclamation-circle" status="danger"></cds-icon>
      <span class="clr-subtext">Helper Text</span>
    </div>
  </div>
</form>
