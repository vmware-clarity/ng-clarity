<!--
~ Copyright (c) 2016-2025 Broadcom. All Rights Reserved.
~ The term "Broadcom" refers to Broadcom Inc. and/or its subsidiaries.
~ This software is released under MIT license.
~ The full license information can be found in LICENSE in the root directory of this project.
-->

<h1>Stepper</h1>

<h2>Stepper with a nested Accordion inside it</h2>

<form clrStepper clrForm [formGroup]="form">
  <clr-stepper-panel formGroupName="name">
    <clr-step-title>Nested Accordion</clr-step-title>
    <clr-step-description> Demonstrate Nested accordion issue </clr-step-description>

    <clr-step-content>
      <ng-template [(clrIfExpanded)]="expanded">
        <clr-accordion>
          <clr-accordion-panel>
            <clr-accordion-title>Accordion 1</clr-accordion-title>
            <clr-accordion-description>
              The full license information can be found in LICENSE in the root directory.
            </clr-accordion-description>
            <clr-accordion-content>Accordion 1 content</clr-accordion-content>
          </clr-accordion-panel>
        </clr-accordion>
        <clr-accordion>
          <clr-accordion-panel>
            <clr-accordion-title>Accordion 2</clr-accordion-title>
            <clr-accordion-content>Accordion 2 content</clr-accordion-content>
          </clr-accordion-panel>
        </clr-accordion>
        <button #nextBtn [clrLoading]="state" clrStepButton="next" (click)="loadingDemo()">NEXT</button>
      </ng-template>
    </clr-step-content>
  </clr-stepper-panel>
</form>

<h2>Accordion with a nested Stepper inside it</h2>

<clr-accordion>
  <clr-accordion-panel [clrAccordionPanelOpen]="true">
    <clr-accordion-title>Accordion 1</clr-accordion-title>
    <clr-accordion-description>
      The full license information can be found in LICENSE in the root directory.
    </clr-accordion-description>
    <clr-accordion-content>
      <form clrStepper clrForm [formGroup]="form">
        <clr-stepper-panel formGroupName="name">
          <clr-step-title>Nested Accordion</clr-step-title>
          <clr-step-description> Demonstrate Nested accordion issue </clr-step-description>
          <clr-step-content *clrIfExpanded>
            <clr-input-container>
              <label>First Name</label>
              <input clrInput formControlName="first" minlength="4" />
              <clr-control-error *clrIfError="'minlength'">First Name Length</clr-control-error>
            </clr-input-container>

            <clr-input-container>
              <label>Last Name</label>
              <input clrInput formControlName="last" />
              <clr-control-error *clrIfError="'required'">Last Name Required</clr-control-error>
            </clr-input-container>

            <button clrStepButton="previous">previous</button>
            <button clrStepButton="next">next</button>
          </clr-step-content>
        </clr-stepper-panel>
      </form>
    </clr-accordion-content>
  </clr-accordion-panel>
</clr-accordion>

<h2>Angular - Stepper Reactive Forms</h2>

<button (click)="form.reset()" class="btn">Reset Stepper</button>
<button (click)="showSecondStep = !showSecondStep" class="btn">toggle second step</button>

<form clrStepper [formGroup]="form" (ngSubmit)="submit()">
  <clr-stepper-panel formGroupName="name">
    <clr-step-title>Legal Name</clr-step-title>
    <clr-step-description>
      The full license information can be found in LICENSE in the root directory.
    </clr-step-description>
    <clr-step-content *clrIfExpanded>
      <clr-input-container>
        <label>First Name</label>
        <input clrInput formControlName="first" minlength="4" />
        <clr-control-error *clrIfError="'minlength'">First Name Length</clr-control-error>
      </clr-input-container>

      <clr-input-container>
        <label>Last Name</label>
        <input clrInput formControlName="last" />
        <clr-control-error *clrIfError="'required'">Last Name Required</clr-control-error>
      </clr-input-container>

      <button clrStepButton="previous">previous</button>
      <button clrStepButton="next">next</button>
    </clr-step-content>
  </clr-stepper-panel>

  @if (showSecondStep) {
  <clr-stepper-panel formGroupName="contact">
    <clr-step-title>Contact Information</clr-step-title>
    <clr-step-description>
      The full license information can be found in LICENSE in the root directory.
    </clr-step-description>
    <clr-step-content *clrIfExpanded>
      <clr-input-container>
        <label>Email</label>
        <input clrInput formControlName="email" />
      </clr-input-container>
      <clr-input-container>
        <label>Phone</label>
        <input clrInput formControlName="phone" />
      </clr-input-container>
      <button clrStepButton="previous">previous</button>
      <button clrStepButton="next">next</button>
    </clr-step-content>
  </clr-stepper-panel>
  }

  <clr-stepper-panel formGroupName="password">
    <clr-step-title>Password</clr-step-title>
    <clr-step-description>
      The full license information can be found in LICENSE in the root directory.
    </clr-step-description>
    <clr-step-content *clrIfExpanded>
      <clr-password-container>
        <label>Password</label>
        <input clrPassword autocomplete="current-password" formControlName="password" />
      </clr-password-container>

      <clr-password-container>
        <label>Confirm Password</label>
        <input clrPassword autocomplete="current-password" formControlName="confirm" />
      </clr-password-container>

      <button clrStepButton="previous">previous</button>
      <button clrStepButton="submit">submit</button>
    </clr-step-content>
  </clr-stepper-panel>
</form>

<h2>Angular - Stepper Template Forms</h2>

<button (click)="contactForm.reset()" class="btn">Reset Stepper</button>
<button (click)="showSecondStep = !showSecondStep" class="btn">toggle second step</button>

<form clrStepper #contactForm="ngForm" (ngSubmit)="templateFormSubmit(contactForm.value)">
  <clr-stepper-panel ngModelGroup="name">
    <clr-step-title>Legal Name</clr-step-title>
    <clr-step-description>
      The full license information can be found in LICENSE in the root directory.
    </clr-step-description>
    <clr-step-content>
      <clr-input-container>
        <label>First Name</label>
        <input clrInput [ngModel]="templateForm.name.firstName" name="firstName" required />
      </clr-input-container>

      <clr-input-container>
        <label>Last Name</label>
        <input clrInput [ngModel]="templateForm.name.lastName" name="lastName" required />
      </clr-input-container>

      <button clrStepButton="next">next</button>
    </clr-step-content>
  </clr-stepper-panel>

  @if (showSecondStep) {
  <clr-stepper-panel ngModelGroup="contact">
    <clr-step-title>Contact Information</clr-step-title>
    <clr-step-description>
      The full license information can be found in LICENSE in the root directory.
    </clr-step-description>
    <clr-step-content>
      <clr-input-container>
        <label>Email</label>
        <input clrInput [ngModel]="templateForm.contact.email" name="email" />
      </clr-input-container>
      <clr-input-container>
        <label>Phone</label>
        <input clrInput [ngModel]="templateForm.contact.phone" name="phone" />
      </clr-input-container>
      <button clrStepButton="next">next</button>
    </clr-step-content>
  </clr-stepper-panel>
  }

  <clr-stepper-panel ngModelGroup="password">
    <clr-step-title>Password</clr-step-title>
    <clr-step-description>
      The full license information can be found in LICENSE in the root directory.
    </clr-step-description>
    <clr-step-content>
      <clr-password-container>
        <label>Password</label>
        <input clrPassword autocomplete="current-password" [ngModel]="templateForm.password.password" name="password" />
      </clr-password-container>

      <clr-password-container>
        <label>Confirm Password</label>
        <input clrPassword autocomplete="current-password" [ngModel]="templateForm.password.confirm" name="confirm" />
      </clr-password-container>

      <button clrStepButton="submit">submit</button>
    </clr-step-content>
  </clr-stepper-panel>
</form>

<h2>Angular - Override Initial Step</h2>
<p>Active Step: {{initialStep}}</p>
<button (click)="toggleInitialStep()" class="btn">Override Initial Step</button>

<form clrStepper [formGroup]="partiallyCompletedForm" (ngSubmit)="submit()" [clrInitialStep]="initialStep">
  <clr-stepper-panel formGroupName="name">
    <clr-step-title>Legal Name</clr-step-title>
    <clr-step-description>
      The full license information can be found in LICENSE in the root directory.
    </clr-step-description>
    <clr-step-content *clrIfExpanded>
      <clr-input-container>
        <label>First Name</label>
        <input clrInput formControlName="first" />
        <clr-control-error *clrIfError="'required'">First Name Required</clr-control-error>
      </clr-input-container>

      <clr-input-container>
        <label>Last Name</label>
        <input clrInput formControlName="last" />
        <clr-control-error *clrIfError="'required'">Last Name Required</clr-control-error>
      </clr-input-container>

      <button clrStepButton="next">next</button>
    </clr-step-content>
  </clr-stepper-panel>

  @if (showSecondStep) {
  <clr-stepper-panel formGroupName="contact">
    <clr-step-title>Contact Information</clr-step-title>
    <clr-step-description>
      The full license information can be found in LICENSE in the root directory.
    </clr-step-description>
    <clr-step-content *clrIfExpanded>
      <clr-input-container>
        <label>Email</label>
        <input clrInput formControlName="email" />
      </clr-input-container>
      <clr-input-container>
        <label>Phone</label>
        <input clrInput formControlName="phone" />
      </clr-input-container>
      <button clrStepButton="next">next</button>
    </clr-step-content>
  </clr-stepper-panel>
  }

  <clr-stepper-panel formGroupName="password">
    <clr-step-title>Password</clr-step-title>
    <clr-step-description>
      The full license information can be found in LICENSE in the root directory.
    </clr-step-description>
    <clr-step-content *clrIfExpanded>
      <clr-password-container>
        <label>Password</label>
        <input clrPassword autocomplete="current-password" formControlName="password" />
      </clr-password-container>

      <clr-password-container>
        <label>Confirm Password</label>
        <input clrPassword autocomplete="current-password" formControlName="confirm" />
      </clr-password-container>

      <button clrStepButton="submit">submit</button>
    </clr-step-content>
  </clr-stepper-panel>
</form>

<h3>Stepper with clrIfExpanded directive</h3>
<h6>Programmatically change step after async call</h6>
<button (click)="changeStep()" class="btn">Change step on async response</button>
@if (!loading) {
<form clrStepper [formGroup]="form" (ngSubmit)="submit()" [clrInitialStep]="initialStep">
  <clr-stepper-panel formGroupName="name">
    <clr-step-title>Legal Name</clr-step-title>
    <clr-step-description>
      @if (!stepsExpandedState.name) {
      <span>Closed</span>
      } @else { Opened }
    </clr-step-description>
    <clr-step-content [(clrIfExpanded)]="stepsExpandedState.name">
      <clr-input-container>
        <label>First Name</label>
        <input clrInput formControlName="first" />
        <clr-control-error *clrIfError="'required'">First Name Required</clr-control-error>
      </clr-input-container>
      <clr-input-container>
        <label>Last Name</label>
        <input clrInput formControlName="last" />
        <clr-control-error *clrIfError="'required'">Last Name Required</clr-control-error>
      </clr-input-container>
      <button clrStepButton="next">next</button>
    </clr-step-content>
  </clr-stepper-panel>
  <clr-stepper-panel formGroupName="contact">
    <clr-step-title>Contact Information</clr-step-title>
    <clr-step-description>
      @if (!stepsExpandedState.contact) {
      <span>Closed</span>
      } @else { Opened }
    </clr-step-description>
    <clr-step-content [(clrIfExpanded)]="stepsExpandedState.contact">
      ...
      <button clrStepButton="next">next</button>
    </clr-step-content>
  </clr-stepper-panel>
  <clr-stepper-panel formGroupName="password">
    <clr-step-title>Password</clr-step-title>
    <clr-step-description>...</clr-step-description>
    <clr-step-content [(clrIfExpanded)]="stepsExpandedState.password">
      ...
      <button clrStepButton="submit">submit</button>
    </clr-step-content>
  </clr-stepper-panel>
</form>
} @else { Loading... }
